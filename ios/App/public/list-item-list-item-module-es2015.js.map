{"version":3,"sources":["./src/app/menu/explore/list-item/list-item.page.html","./src/app/menu/explore/list-item/list-item-routing.module.ts","./src/app/menu/explore/list-item/list-item.module.ts","./src/app/menu/explore/list-item/list-item.page.scss","./src/app/menu/explore/list-item/list-item.page.ts"],"names":[],"mappings":"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","file":"list-item-list-item-module-es2015.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-buttons slot='start' routerLink=\\\"/menu/tabs/explore\\\">\\r\\n      <ion-icon class=\\\"header__icon\\\" src='assets/icon/backButton.svg'></ion-icon>\\r\\n    </ion-buttons>\\r\\n    <ion-title class=\\\"ion-text-center\\\">\\r\\n      Wisea\\r\\n    </ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content [fullscreen]=\\\"true\\\" color=\\\"background\\\">\\r\\n  <ion-searchbar #searchbar=\\\"ngModel\\\" ngModel placeholder=\\\"Cari wisata favoritmu\\\" class=\\\"ion-padding\\\" (ionInput)=\\\"searchWisata($event)\\\" showCancelButton=\\\"focus\\\"></ion-searchbar>\\r\\n  <p class=\\\"ion-text-center\\\" *ngIf=\\\"wisataFilter?.length === 0\\\">Pencarian tidak ditemukan</p>\\r\\n  <ion-list class=\\\"ion-no-padding\\\">\\r\\n    <ion-item button lines=\\\"none\\\" class=\\\"ion-margin ion-no-padding\\\" *ngFor=\\\"let wisata of (wisataFilter)\\\" (click)=\\\"goToExploreDetail(wisata.id)\\\">\\r\\n      <ion-thumbnail slot=\\\"start\\\" class=\\\"ion-no-margin ion-margin-end\\\" style=\\\"height: 13vh; width: 13vh\\\">\\r\\n        <ion-img [src]=\\\"(wisata.gambarUrl | async)\\\" style=\\\"border-top-left-radius: 10px; border-bottom-left-radius: 10px;\\\"></ion-img>\\r\\n      </ion-thumbnail>\\r\\n      <ion-label class=\\\"ion-no-margin\\\">\\r\\n        <p class=\\\"ion-no-margin\\\" style=\\\"font-weight: bold; text-transform: uppercase;\\\">{{ wisata.nama }}</p>\\r\\n        <ion-grid fixed class=\\\"ion-no-padding\\\">\\r\\n          <ion-row>\\r\\n            <ion-col size=\\\"6\\\" class=\\\"ion-no-padding\\\">\\r\\n              <ion-icon class=\\\"ion-float-left\\\" style=\\\"margin-right: 10px\\\" src=\\\"assets/icon/money.svg\\\"></ion-icon>\\r\\n              <p>{{ wisata.harga | currency:'IDR':'symbol-narrow':'3.0' }}</p>\\r\\n            </ion-col>\\r\\n            <ion-col size=\\\"6\\\" class=\\\"ion-no-padding\\\">\\r\\n              <ion-icon class=\\\"ion-float-left\\\" style=\\\"margin-right: 10px\\\" src=\\\"assets/icon/date.svg\\\"></ion-icon>\\r\\n              <p style=\\\"overflow: hidden; text-overflow: ellipsis; white-space: nowrap;\\\">{{ wisata.tanggal }}</p>\\r\\n            </ion-col>\\r\\n          </ion-row>\\r\\n          <ion-row>\\r\\n            <ion-col size=\\\"6\\\" class=\\\"ion-no-padding\\\">\\r\\n              <ion-icon class=\\\"ion-float-left\\\" style=\\\"margin-right: 10px\\\" src=\\\"assets/icon/sold.svg\\\"></ion-icon>\\r\\n              <p style=\\\"overflow: hidden; text-overflow: ellipsis; white-space: nowrap;\\\">{{ wisata.tiketTerjual }} sold</p>\\r\\n            </ion-col>\\r\\n            <ion-col size=\\\"6\\\" class=\\\"ion-no-padding\\\">\\r\\n              <ion-icon class=\\\"ion-float-left\\\" style=\\\"margin-right: 10px\\\" src=\\\"assets/icon/location.svg\\\"></ion-icon>\\r\\n              <p style=\\\"overflow: hidden; text-overflow: ellipsis; white-space: nowrap;\\\">{{ wisata.distance }} km</p>\\r\\n            </ion-col>\\r\\n          </ion-row>\\r\\n        </ion-grid>\\r\\n      </ion-label>\\r\\n    </ion-item>\\r\\n  </ion-list>\\r\\n</ion-content>\\r\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ListItemPage } from './list-item.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ListItemPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ListItemPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ListItemPageRoutingModule } from './list-item-routing.module';\n\nimport { ListItemPage } from './list-item.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ListItemPageRoutingModule\n  ],\n  declarations: [ListItemPage]\n})\nexport class ListItemPageModule {}\n","export default \"ion-item {\\n  --border-radius: 10px !important;\\n  --border-width: 1px !important;\\n  --background: #FFF5DA;\\n}\\n\\n.header__icon {\\n  font-size: 24px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbWVudS9leHBsb3JlL2xpc3QtaXRlbS9saXN0LWl0ZW0ucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsZ0NBQUE7RUFDQSw4QkFBQTtFQUNBLHFCQUFBO0FBQ0Y7O0FBR0U7RUFDRSxlQUFBO0FBQUoiLCJmaWxlIjoic3JjL2FwcC9tZW51L2V4cGxvcmUvbGlzdC1pdGVtL2xpc3QtaXRlbS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24taXRlbSB7XHJcbiAgLS1ib3JkZXItcmFkaXVzOiAxMHB4ICFpbXBvcnRhbnQ7XHJcbiAgLS1ib3JkZXItd2lkdGg6IDFweCAhaW1wb3J0YW50O1xyXG4gIC0tYmFja2dyb3VuZDogI0ZGRjVEQTtcclxufVxyXG5cclxuLmhlYWRlciB7XHJcbiAgJl9faWNvbntcclxuICAgIGZvbnQtc2l6ZTogMjRweDtcclxuICB9XHJcbn0iXX0= */\";","import { Component, OnInit } from '@angular/core';\r\nimport {WisataService} from '../../../service/wisata.service';\r\nimport {AngularFireStorage} from '@angular/fire/storage';\r\nimport {Observable} from 'rxjs';\r\nimport {Wisata} from '../../../model/wisata.interface';\r\nimport {map} from 'rxjs/operators';\r\nimport {ActivatedRoute, Router} from \"@angular/router\";\r\nimport {Geolocation, GeolocationPosition} from \"@capacitor/core\";\r\nimport {LoadingController} from \"@ionic/angular\";\r\n\r\n@Component({\r\n  selector: 'app-list-item',\r\n  templateUrl: './list-item.page.html',\r\n  styleUrls: ['./list-item.page.scss'],\r\n})\r\nexport class ListItemPage implements OnInit {\r\n  public wisataList: Wisata[];\r\n  public wisataFilter: Wisata[];\r\n  userLocation: any;\r\n\r\n  constructor(\r\n      private wisataService: WisataService,\r\n      private storage: AngularFireStorage,\r\n      private router: Router,\r\n      private route: ActivatedRoute,\r\n      private loadingController: LoadingController\r\n  ) { }\r\n\r\n  async ngOnInit() {\r\n    const loading = await this.loadingController.create();\r\n    await loading.present();\r\n\r\n    const order = this.route.snapshot.paramMap.get('order');\r\n    this.getWisataList(order);\r\n\r\n    loading.dismiss();\r\n  }\r\n\r\n  getWisataList(order = null) {\r\n    this.wisataService.getWisata(null, order).pipe(\r\n        map(async wisataList => {\r\n          wisataList.map(wisata => {\r\n            wisata.gambarUrl = this.getImageUrl(wisata.gambar[0]);\r\n            return wisata;\r\n          });\r\n\r\n          wisataList = await this.applyHaversine(wisataList);\r\n\r\n          if (order === 'near-me') {\r\n            wisataList.sort((wisataA, wisataB) => {\r\n              return wisataA.distance - wisataB.distance;\r\n            });\r\n          } else if (order === 'latest') {\r\n            wisataList.sort((wisataA, wisataB) => {\r\n              return new Date(wisataB.tanggal).getTime() - new Date(wisataA.tanggal).getTime();\r\n            });\r\n          }\r\n\r\n          return wisataList;\r\n        })\r\n    ).subscribe(async wisataList => {\r\n      this.wisataList = await wisataList;\r\n      this.wisataFilter = await wisataList;\r\n    });\r\n  }\r\n\r\n  getImageUrl(imageName) {\r\n    return this.storage.ref(`wisata/${imageName}`).getDownloadURL();\r\n  }\r\n\r\n  async searchWisata($event) {\r\n    const searchTerm = $event.srcElement.value;\r\n    if (!searchTerm) {\r\n      this.wisataFilter = this.wisataList;\r\n      return;\r\n    }\r\n    this.wisataFilter = this.wisataList.filter(wisata => {\r\n      if (wisata.nama && searchTerm) {\r\n        return (wisata.nama.toLowerCase().indexOf(searchTerm.toLowerCase()) > -1);\r\n      }\r\n    });\r\n  }\r\n\r\n  goToExploreDetail(wisataId) {\r\n    this.router.navigate(['menu/tabs/explore/explore-detail', wisataId]);\r\n  }\r\n\r\n  async applyHaversine(wisataList){\r\n    await this.getCurrentPosition().then((coordinates) => {\r\n      this.userLocation = {\r\n        lat: coordinates.coords.latitude,\r\n        lng: coordinates.coords.longitude\r\n      };\r\n    });\r\n\r\n    wisataList.map((wisata) => {\r\n      const placeLocation = {\r\n        lat: wisata.position[0],\r\n        lng: wisata.position[1]\r\n      };\r\n\r\n      wisata.distance = this.getDistanceBetweenPoints(this.userLocation, placeLocation, 'km').toFixed(2);\r\n    });\r\n\r\n    return wisataList;\r\n  }\r\n\r\n  async getCurrentPosition() {\r\n    return await Geolocation.getCurrentPosition();\r\n  }\r\n\r\n  getDistanceBetweenPoints(start, end, units){\r\n    const earthRadius = {\r\n      miles: 3958.8,\r\n      km: 6371\r\n    };\r\n\r\n    const R = earthRadius[units || 'miles'];\r\n    const lat1 = start.lat;\r\n    const lon1 = start.lng;\r\n    const lat2 = end.lat;\r\n    const lon2 = end.lng;\r\n\r\n    const dLat = this.toRad((lat2 - lat1));\r\n    const dLon = this.toRad((lon2 - lon1));\r\n    const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n        Math.cos(this.toRad(lat1)) * Math.cos(this.toRad(lat2)) *\r\n        Math.sin(dLon / 2) *\r\n        Math.sin(dLon / 2);\r\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n    const d = R * c;\r\n\r\n    return d;\r\n  }\r\n\r\n  toRad(x){\r\n    return x * Math.PI / 180;\r\n  }\r\n\r\n}\r\n"],"sourceRoot":"webpack:///"}