{"version":3,"sources":["webpack:///src/app/menu/profile/edit-profile/edit-profile.page.html","webpack:///src/app/menu/profile/edit-profile/edit-profile-routing.module.ts","webpack:///src/app/menu/profile/edit-profile/edit-profile.module.ts","webpack:///src/app/menu/profile/edit-profile/edit-profile.page.scss","webpack:///src/app/menu/profile/edit-profile/edit-profile.page.ts"],"names":["redirectUnauthorizedToLogin","routes","path","component","EditProfilePageRoutingModule","imports","forChild","exports","EditProfilePageModule","declarations","Camera","EditProfilePage","authService","loadingController","alertController","router","appComponent","passwordHide","photo","userPhoto","oldPhoto","oldPhotoName","base64Photo","create","loading","present","getUserData","subscribe","ref","getUserPhotoUrl","res","dismiss","userProfile","form","name","updateOn","validators","required","username","email","phone","minLength","maxLength","newPassword","getPhoto","quality","allowEditing","resultType","Base64","profilePicture","base64String","confirmPassword","value","editUserData","then","updateUserProfile","navigateByUrl","replaceUrl","err","header","message","buttons","alert","cssClass","subHeader","inputs","type","placeholder","text","handler","data","edit","password","role","selector","template"],"mappings":"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","file":"edit-profile-edit-profile-module-es5.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-buttons slot='start' routerLink=\\\"/menu/tabs/profile\\\">\\r\\n      <ion-icon src='assets/icon/backButton.svg'></ion-icon>\\r\\n    </ion-buttons>\\r\\n    <ion-title class=\\\"ion-text-center\\\">\\r\\n      Wisea\\r\\n    </ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content [fullscreen]=\\\"true\\\" color=\\\"background\\\" *ngIf=\\\"userProfile\\\">\\r\\n  <ion-item-group id=\\\"container\\\">\\r\\n    <ion-item lines='none'>\\r\\n      <ion-avatar class=\\\"proflePic\\\">\\r\\n        <ion-img src=\\\"{{ photo.userPhoto }}\\\"></ion-img>\\r\\n      </ion-avatar>\\r\\n      <ion-button class=\\\"btnImage\\\" (click)=\\\"takePicture()\\\"><ion-icon name=\\\"camera\\\"></ion-icon></ion-button>\\r\\n    </ion-item>\\r\\n    <form class=\\\"edit-form\\\" [formGroup]=\\\"form\\\">\\r\\n      <mat-label>Nama Lengkap</mat-label>\\r\\n      <mat-form-field appearance=\\\"standard\\\">\\r\\n        <input matInput formControlName=\\\"name\\\" ngModel=\\\"{{ userProfile?.name }}\\\">\\r\\n        <mat-error *ngIf=\\\"(form.get('name').dirty || form.get('name').touched) && form.get('name').errors\\\">\\r\\n          <span *ngIf=\\\"form.get('name').errors.required\\\">Full name is required</span>\\r\\n        </mat-error>\\r\\n      </mat-form-field>\\r\\n\\r\\n      <mat-label>Username</mat-label>\\r\\n      <mat-form-field appearance=\\\"standard\\\">\\r\\n        <input matInput formControlName=\\\"username\\\" ngModel=\\\"{{ userProfile?.username }}\\\">\\r\\n        <mat-error *ngIf=\\\"(form.get('username').dirty || form.get('username').touched) && form.get('username').errors\\\">\\r\\n          <span *ngIf=\\\"form.get('username').errors.required\\\">Username is required</span>\\r\\n        </mat-error>\\r\\n      </mat-form-field>\\r\\n\\r\\n      <mat-label>Email</mat-label>\\r\\n      <mat-form-field appearance=\\\"standard\\\">\\r\\n        <input matInput formControlName=\\\"email\\\" ngModel=\\\"{{ userProfile?.email }}\\\">\\r\\n        <mat-error *ngIf=\\\"(form.get('email').dirty || form.get('email').touched) && form.get('email').errors\\\">\\r\\n          <span *ngIf=\\\"form.get('email').errors.required\\\">Email is required</span>\\r\\n          <span *ngIf=\\\"form.get('email').errors.email\\\">Email is invalid</span>\\r\\n        </mat-error>\\r\\n      </mat-form-field>\\r\\n\\r\\n      <mat-label>Nomor Telepon</mat-label>\\r\\n      <mat-form-field appearance=\\\"standard\\\">\\r\\n        <input matInput formControlName=\\\"phone\\\" ngModel=\\\"{{ userProfile?.phone }}\\\">\\r\\n        <mat-error *ngIf=\\\"(form.get('phone').dirty || form.get('phone').touched) && form.get('phone').errors\\\">\\r\\n          <span *ngIf=\\\"form.get('phone').errors.required\\\">Phone number is required</span>\\r\\n          <span *ngIf=\\\"form.get('phone').errors.minlength || form.get('phone').errors.maxlength\\\">Phone needs to be between 10 - 12 characters</span>\\r\\n        </mat-error>\\r\\n      </mat-form-field>\\r\\n\\r\\n      <mat-label>Password Baru</mat-label>\\r\\n      <mat-form-field appearance=\\\"standard\\\">\\r\\n        <input matInput [type]=\\\"passwordHide ? 'password' : 'text'\\\" formControlName=\\\"newPassword\\\">\\r\\n        <mat-icon matSuffix (click)=\\\"passwordHide = !passwordHide\\\" [attr.aria-label]=\\\"'Hide password'\\\" [attr.aria-pressed]=\\\"passwordHide\\\">\\r\\n          {{passwordHide ? 'visibility_off' : 'visibility'}}\\r\\n        </mat-icon>\\r\\n        <mat-error *ngIf=\\\"(form.get('newPassword').dirty || form.get('newPassword').touched) && form.get('newPassword').errors\\\">\\r\\n          <span *ngIf=\\\"form.get('newPassword').errors.minlength\\\">Password needs to be 6 characters</span>\\r\\n        </mat-error>\\r\\n      </mat-form-field>\\r\\n    </form>\\r\\n    <ion-button (click)=\\\"confirmationAlert()\\\" expand=\\\"block\\\">Submit</ion-button>\\r\\n    </ion-item-group>\\r\\n</ion-content>\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { EditProfilePage } from './edit-profile.page';\r\nimport {canActivate, redirectUnauthorizedTo} from '@angular/fire/auth-guard';\r\n\r\nconst redirectUnauthorizedToLogin = () => redirectUnauthorizedTo(['/']);\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: EditProfilePage,\r\n    ...canActivate(redirectUnauthorizedToLogin),\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class EditProfilePageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { EditProfilePageRoutingModule } from './edit-profile-routing.module';\r\n\r\nimport { EditProfilePage } from './edit-profile.page';\r\n\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport {MatIconModule} from \"@angular/material/icon\";\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        FormsModule,\r\n        IonicModule,\r\n        EditProfilePageRoutingModule,\r\n        MatInputModule,\r\n        MatFormFieldModule,\r\n        ReactiveFormsModule,\r\n        MatIconModule\r\n    ],\r\n  declarations: [EditProfilePage]\r\n})\r\nexport class EditProfilePageModule {}\r\n","export default \"ion-icon {\\n  font-size: 24px;\\n  margin-left: 5px;\\n}\\n\\nion-title {\\n  margin-left: -15%;\\n}\\n\\n#container {\\n  position: absolute;\\n  left: 5%;\\n  right: 5%;\\n  top: 5%;\\n  color: var(--ion-color-secondary-contrast);\\n}\\n\\n#container ion-button {\\n  margin-bottom: 80px;\\n  font-weight: 700;\\n}\\n\\n#container ion-item ion-button {\\n  position: absolute;\\n  left: 53%;\\n  top: 65%;\\n  z-index: 1;\\n  float: right;\\n}\\n\\n#container .btnImage {\\n  width: 60px;\\n  height: 60px;\\n  --border-radius: 50%;\\n}\\n\\n#container ion-icon {\\n  font-size: 70px;\\n  display: block;\\n}\\n\\n#container ion-item {\\n  margin: 50px 0px;\\n}\\n\\n.proflePic {\\n  height: 200px;\\n  width: 200px;\\n  margin: 0 auto;\\n}\\n\\n.mat-icon {\\n  color: #946E41;\\n}\\n\\nmat-form-field {\\n  width: 100%;\\n}\\n\\nmat-label {\\n  /*change color of label*/\\n  color: #946E41 !important;\\n  font-weight: 500;\\n}\\n\\n::ng-deep .mat-form-field-underline {\\n  /*change color of underline*/\\n  background-color: #946E41 !important;\\n}\\n\\n::ng-deep .mat-form-field-ripple {\\n  /*change color of underline when focused*/\\n  background-color: #946E41 !important;\\n}\\n\\n::ng-deep .mat-form-field-wrapper {\\n  margin-bottom: 20px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbWVudS9wcm9maWxlL2VkaXQtcHJvZmlsZS9lZGl0LXByb2ZpbGUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsZUFBQTtFQUNBLGdCQUFBO0FBQ0Y7O0FBRUE7RUFDRSxpQkFBQTtBQUNGOztBQUVBO0VBQ0Usa0JBQUE7RUFDQSxRQUFBO0VBQ0EsU0FBQTtFQUNBLE9BQUE7RUFDQSwwQ0FBQTtBQUNGOztBQUNFO0VBQ0UsbUJBQUE7RUFDQSxnQkFBQTtBQUNKOztBQUVFO0VBQ0Usa0JBQUE7RUFDQSxTQUFBO0VBQ0EsUUFBQTtFQUNBLFVBQUE7RUFDQSxZQUFBO0FBQUo7O0FBR0U7RUFDRSxXQUFBO0VBQ0EsWUFBQTtFQUNBLG9CQUFBO0FBREo7O0FBSUU7RUFDRSxlQUFBO0VBQ0EsY0FBQTtBQUZKOztBQU1BO0VBQ0UsZ0JBQUE7QUFIRjs7QUFNQTtFQUNFLGFBQUE7RUFDQSxZQUFBO0VBQ0EsY0FBQTtBQUhGOztBQU1BO0VBQ0UsY0FBQTtBQUhGOztBQU1BO0VBQ0UsV0FBQTtBQUhGOztBQU1BO0VBQ0Usd0JBQUE7RUFDQSx5QkFBQTtFQUNBLGdCQUFBO0FBSEY7O0FBT0U7RUFDRSw0QkFBQTtFQUNBLG9DQUFBO0FBSko7O0FBT0U7RUFDRSx5Q0FBQTtFQUNBLG9DQUFBO0FBTEo7O0FBUUU7RUFDRSxtQkFBQTtBQU5KIiwiZmlsZSI6InNyYy9hcHAvbWVudS9wcm9maWxlL2VkaXQtcHJvZmlsZS9lZGl0LXByb2ZpbGUucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLWljb24ge1xyXG4gIGZvbnQtc2l6ZTogMjRweDtcclxuICBtYXJnaW4tbGVmdDogNXB4O1xyXG59XHJcblxyXG5pb24tdGl0bGUge1xyXG4gIG1hcmdpbi1sZWZ0OiAtMTUlO1xyXG59XHJcblxyXG4jY29udGFpbmVyIHtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgbGVmdDogNSU7XHJcbiAgcmlnaHQ6IDUlO1xyXG4gIHRvcDogNSU7XHJcbiAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1zZWNvbmRhcnktY29udHJhc3QpO1xyXG5cclxuICBpb24tYnV0dG9uIHtcclxuICAgIG1hcmdpbi1ib3R0b206IDgwcHg7XHJcbiAgICBmb250LXdlaWdodDogNzAwO1xyXG4gIH1cclxuXHJcbiAgaW9uLWl0ZW0gaW9uLWJ1dHRvbiB7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBsZWZ0OiA1MyU7XHJcbiAgICB0b3A6IDY1JTtcclxuICAgIHotaW5kZXg6IDE7XHJcbiAgICBmbG9hdDogcmlnaHQ7XHJcbiAgfVxyXG5cclxuICAuYnRuSW1hZ2V7XHJcbiAgICB3aWR0aDogNjBweDtcclxuICAgIGhlaWdodDogNjBweDtcclxuICAgIC0tYm9yZGVyLXJhZGl1czogNTAlO1xyXG4gIH1cclxuXHJcbiAgaW9uLWljb24ge1xyXG4gICAgZm9udC1zaXplOiA3MHB4O1xyXG4gICAgZGlzcGxheTogYmxvY2s7XHJcbiAgfVxyXG59XHJcblxyXG4jY29udGFpbmVyIGlvbi1pdGVtIHtcclxuICBtYXJnaW46IDUwcHggMHB4O1xyXG59XHJcblxyXG4ucHJvZmxlUGljIHtcclxuICBoZWlnaHQ6IDIwMHB4O1xyXG4gIHdpZHRoOiAyMDBweDtcclxuICBtYXJnaW46IDAgYXV0bztcclxufVxyXG5cclxuLm1hdC1pY29uIHtcclxuICBjb2xvcjogIzk0NkU0MTtcclxufVxyXG5cclxubWF0LWZvcm0tZmllbGQge1xyXG4gIHdpZHRoOiAxMDAlO1xyXG59XHJcblxyXG5tYXQtbGFiZWwge1xyXG4gIC8qY2hhbmdlIGNvbG9yIG9mIGxhYmVsKi9cclxuICBjb2xvcjogIzk0NkU0MSAhaW1wb3J0YW50O1xyXG4gIGZvbnQtd2VpZ2h0OiA1MDA7XHJcbn1cclxuXHJcbjo6bmctZGVlcCB7XHJcbiAgLm1hdC1mb3JtLWZpZWxkLXVuZGVybGluZSB7XHJcbiAgICAvKmNoYW5nZSBjb2xvciBvZiB1bmRlcmxpbmUqL1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzk0NkU0MSAhaW1wb3J0YW50O1xyXG4gIH1cclxuXHJcbiAgLm1hdC1mb3JtLWZpZWxkLXJpcHBsZSB7XHJcbiAgICAvKmNoYW5nZSBjb2xvciBvZiB1bmRlcmxpbmUgd2hlbiBmb2N1c2VkKi9cclxuICAgIGJhY2tncm91bmQtY29sb3I6ICM5NDZFNDEgIWltcG9ydGFudDtcclxuICB9XHJcblxyXG4gIC5tYXQtZm9ybS1maWVsZC13cmFwcGVye1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMjBweDtcclxuICB9XHJcbn1cclxuIl19 */\";","import {Component, OnInit} from '@angular/core';\r\nimport {FormControl, FormGroup, Validators} from '@angular/forms';\r\nimport {AuthService} from '../../../service/auth.service';\r\nimport {AlertController, LoadingController} from '@ionic/angular';\r\nimport {Router} from '@angular/router';\r\nimport {CameraResultType, Plugins} from '@capacitor/core';\r\nimport {AppComponent} from \"../../../app.component\";\r\n\r\nconst { Camera } = Plugins;\r\n\r\n@Component({\r\n  selector: 'app-edit-profile',\r\n  templateUrl: './edit-profile.page.html',\r\n  styleUrls: ['./edit-profile.page.scss'],\r\n})\r\nexport class EditProfilePage implements OnInit {\r\n  form: FormGroup;\r\n  userProfile: any;\r\n  passwordHide = true;\r\n  photo: any = {\r\n    userPhoto: '',\r\n    oldPhoto: '',\r\n    oldPhotoName: '',\r\n    base64Photo: '',\r\n  };\r\n\r\n  constructor(\r\n      private authService: AuthService,\r\n      private loadingController: LoadingController,\r\n      private alertController: AlertController,\r\n      private router: Router,\r\n      private appComponent: AppComponent\r\n  ) { }\r\n\r\n  async ngOnInit() {\r\n    const loading = await this.loadingController.create();\r\n    await loading.present();\r\n\r\n    this.authService.getUserData().subscribe(ref => {\r\n      this.authService.getUserPhotoUrl(ref.photo).subscribe(res => {\r\n        loading.dismiss();\r\n\r\n        this.userProfile = ref;\r\n        this.photo.userPhoto = res;\r\n        this.photo.oldPhoto = res;\r\n        this.photo.base64Photo = res;\r\n        this.photo.oldPhotoName = ref.photo;\r\n      });\r\n    });\r\n\r\n    this.form = new FormGroup({\r\n      name: new FormControl(null, {\r\n        updateOn: 'change',\r\n        validators: [Validators.required]\r\n      }),\r\n      username: new FormControl(null, {\r\n        updateOn: 'change',\r\n        validators: [Validators.required]\r\n      }),\r\n      email: new FormControl(null, {\r\n        updateOn: 'change',\r\n        validators: [Validators.required, Validators.email]\r\n      }),\r\n      phone: new FormControl(null, {\r\n        updateOn: 'change',\r\n        validators: [Validators.required, Validators.minLength(10), Validators.maxLength(12)]\r\n      }),\r\n      photo: new FormControl(null, {\r\n        updateOn: 'change',\r\n        validators: [Validators.required]\r\n      }),\r\n      newPassword: new FormControl(null, {\r\n        updateOn: 'change',\r\n        validators: [Validators.minLength(6)]\r\n      }),\r\n    });\r\n  }\r\n\r\n  async takePicture() {\r\n    try {\r\n      const profilePicture = await Camera.getPhoto({\r\n        quality: 100,\r\n        allowEditing: false,\r\n        resultType: CameraResultType.Base64,\r\n      });\r\n      this.photo.base64Photo = profilePicture.base64String;\r\n      this.photo.userPhoto = 'data:image/png;base64,' + this.photo.base64Photo;\r\n    } catch (error) {\r\n    }\r\n  }\r\n\r\n  async edit(confirmPassword) {\r\n    const loading = await this.loadingController.create();\r\n    await loading.present();\r\n    this.form.value.photo = this.photo.userPhoto;\r\n\r\n    await this.authService.editUserData(this.form.value, confirmPassword, this.photo).then(() => {\r\n      this.appComponent.updateUserProfile();\r\n      loading.dismiss();\r\n      this.router.navigateByUrl('/menu/tabs/profile', { replaceUrl: true });\r\n    }, async err => {\r\n      loading.dismiss();\r\n      const alert = await this.alertController.create({\r\n        header: 'Edit profile gagal',\r\n        message: err.message,\r\n        buttons: ['OK'],\r\n      });\r\n\r\n      await alert.present();\r\n    });\r\n  }\r\n\r\n  async confirmationAlert() {\r\n    const alert = await this.alertController.create({\r\n      cssClass: 'my-custom-class',\r\n      header: 'Konfirmasi perubahan data diri',\r\n      subHeader: 'Silahkan masukkan password anda.',\r\n      inputs: [\r\n        {\r\n          name: 'password',\r\n          type: 'password',\r\n          placeholder: 'Password',\r\n          cssClass: 'specialClass',\r\n        }\r\n      ],\r\n      buttons: [\r\n        {\r\n          text: 'Ok',\r\n          handler: data => {\r\n            this.edit(data.password);\r\n          }\r\n        }, {\r\n          text: 'Cancel',\r\n          role: 'cancel',\r\n          cssClass: 'secondary',\r\n        }\r\n      ]\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n}\r\n"]}