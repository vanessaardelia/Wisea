{"version":3,"sources":["./src/app/menu/explore/shopping-cart/shopping-cart.page.html","./src/app/menu/explore/shopping-cart/shopping-cart-routing.module.ts","./src/app/menu/explore/shopping-cart/shopping-cart.module.ts","./src/app/menu/explore/shopping-cart/shopping-cart.page.scss","./src/app/menu/explore/shopping-cart/shopping-cart.page.ts"],"names":[],"mappings":"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","file":"shopping-cart-shopping-cart-module-es2015.js","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-buttons slot=\\\"start\\\" [routerLink]=\\\"['/menu/tabs/explore/explore-detail/', (wisataList | async)?.id]\\\">\\r\\n      <ion-icon class=\\\"header__icon\\\" src='assets/icon/backButton.svg'></ion-icon>\\r\\n    </ion-buttons>\\r\\n    <ion-title class=\\\"ion-text-center\\\">\\r\\n      Wisea\\r\\n    </ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content [fullscreen]=\\\"true\\\" color=\\\"background\\\">\\r\\n    <form [formGroup]=\\\"shopForm\\\" (submit)=\\\"shopping()\\\">\\r\\n  <ion-item-group class=\\\"body__container\\\">\\r\\n      <ion-item-group class=\\\"body__card\\\">\\r\\n        <ion-card *ngIf=\\\"(wisataList | async)\\\">\\r\\n          <ion-card-header>\\r\\n            <ion-row>\\r\\n              <ion-item-group class=\\\"cart__avatar\\\">\\r\\n                <ion-avatar slot=\\\"start\\\">\\r\\n                  <img [src]=\\\"(imageDetail[0] | async)\\\">\\r\\n                </ion-avatar>\\r\\n              </ion-item-group>\\r\\n              <ion-col>\\r\\n                <ion-card-title style=\\\"color: var(--ion-color-primary); font-size: 16px;\\\"><strong>{{ (wisataList | async)?.nama }}</strong></ion-card-title>\\r\\n                <ion-row>\\r\\n                  <ion-chip color=\\\"success\\\">\\r\\n                    <ion-label style=\\\"font-size: 12px;\\\">{{ (wisataList | async)?.kategori }}</ion-label>\\r\\n                  </ion-chip>\\r\\n                  <ion-item-group>\\r\\n                    <ion-row style=\\\"display: flex;\\\">\\r\\n                      <ion-icon name=\\\"bag-handle-outline\\\" style=\\\"font-size: 16px; align-self: center; margin-right: 8px;\\\"></ion-icon>\\r\\n                      <p>{{ (wisataList | async)?.harga | currency:'IDR':'symbol-narrow':'3.0' }}</p>\\r\\n                    </ion-row>\\r\\n                  </ion-item-group>\\r\\n                </ion-row>\\r\\n                <ion-item-group class=\\\"btn__qty\\\">\\r\\n                  <ion-row>\\r\\n                    <ion-icon class=\\\"header__icon btn__qty-remove\\\" name=\\\"remove-circle\\\" (click)=\\\"decrementQty()\\\" item-right></ion-icon>\\r\\n                    <ion-input class=\\\"btn__qty-value\\\" type=\\\"number\\\" min=\\\"0\\\" [(ngModel)]=\\\"qty\\\" formControlName=\\\"qty\\\"></ion-input>\\r\\n                    <ion-icon class=\\\"header__icon btn__qty-add\\\" name=\\\"add-circle\\\" (click)=\\\"incrementQty()\\\" item-right></ion-icon>\\r\\n                  </ion-row>\\r\\n                </ion-item-group>\\r\\n              </ion-col>\\r\\n            </ion-row>\\r\\n          </ion-card-header>\\r\\n        </ion-card>\\r\\n        <ion-item-group class=\\\"body__form\\\">\\r\\n          <ion-label style=\\\"color: var(--ion-color-primary); margin: 8px 8px;\\\"><strong>Data pribadi</strong></ion-label>\\r\\n          <ion-item-group>\\r\\n            <ion-item>\\r\\n              <ion-label position=\\\"stacked\\\">NIK</ion-label>\\r\\n              <ion-input autofocus type=\\\"number\\\" clear-input required formControlName=\\\"nik\\\"></ion-input>\\r\\n            </ion-item>\\r\\n            <ion-item>\\r\\n              <ion-label position=\\\"stacked\\\">Nomor telepon</ion-label>\\r\\n              <ion-input clear-input type=\\\"number\\\" required formControlName=\\\"tlp\\\"></ion-input>\\r\\n            </ion-item>\\r\\n          </ion-item-group>\\r\\n        </ion-item-group>\\r\\n      </ion-item-group>\\r\\n      <ion-item-group class=\\\"body__total\\\">\\r\\n        <ion-row class=\\\"body__total-buy\\\">\\r\\n          <ion-label style=\\\"color: var(--ion-color-primary); font-size: 14px;\\\"><strong>Jumlah</strong></ion-label>\\r\\n          <ion-label style=\\\"font-size: 14px;\\\">{{ qty }}</ion-label>\\r\\n        </ion-row>\\r\\n        <ion-row class=\\\"body__total-buy\\\">\\r\\n          <ion-label style=\\\"color: var(--ion-color-primary);\\\"><strong>Total</strong></ion-label>\\r\\n          <ion-label>{{ total | currency:'IDR'}}</ion-label>\\r\\n        </ion-row>\\r\\n        <ion-button type=\\\"submit\\\" shape=\\\"round\\\" expand=\\\"full\\\" class=\\\"btn\\\" [disabled]=\\\"!shopForm.valid\\\">Bayar</ion-button>\\r\\n      </ion-item-group>\\r\\n  </ion-item-group>\\r\\n  </form>\\r\\n</ion-content>\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { ShoppingCartPage } from './shopping-cart.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ShoppingCartPage\r\n  },\r\n  {\r\n    path: 'payment-summary',\r\n    loadChildren: () => import('./payment-summary/payment-summary.module').then( m => m.PaymentSummaryPageModule)\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class ShoppingCartPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ShoppingCartPageRoutingModule } from './shopping-cart-routing.module';\r\n\r\nimport { ShoppingCartPage } from './shopping-cart.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    ShoppingCartPageRoutingModule,\r\n    ReactiveFormsModule\r\n  ],\r\n  declarations: [ShoppingCartPage]\r\n})\r\nexport class ShoppingCartPageModule {}\r\n","export default \".header__icon {\\n  font-size: 24px;\\n}\\n\\n.cart__avatar {\\n  margin-right: 8px;\\n}\\n\\n.body__container {\\n  background-color: #FFF9E9 !important;\\n  padding-top: 32px;\\n}\\n\\n.body__card {\\n  border-radius: 24px;\\n  background-color: white;\\n  padding: 32px 0px;\\n  margin-top: -48px;\\n}\\n\\n.body__form {\\n  padding: 0px 8px 8px;\\n}\\n\\n.body__total {\\n  background-color: #FFF9E9;\\n  padding: 16px 8px;\\n}\\n\\n.body__total-buy {\\n  display: flex;\\n  justify-content: space-between;\\n  margin-bottom: 8px;\\n}\\n\\n.btn {\\n  margin-top: 16px;\\n}\\n\\n.btn__qty {\\n  display: flex;\\n  justify-content: space-between;\\n}\\n\\n.btn__qty-add {\\n  color: #7BA57F;\\n  align-self: center;\\n}\\n\\n.btn__qty-remove {\\n  color: #F06F53;\\n  align-self: center;\\n}\\n\\n.btn__qty-value {\\n  width: 40px;\\n  align-self: center;\\n  text-align: center;\\n}\\n\\nion-card {\\n  background-color: #FFF9E9;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbWVudS9leHBsb3JlL3Nob3BwaW5nLWNhcnQvc2hvcHBpbmctY2FydC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0k7RUFDRSxlQUFBO0FBQU47O0FBS0k7RUFDRSxpQkFBQTtBQUZOOztBQU9JO0VBQ0Usb0NBQUE7RUFDQSxpQkFBQTtBQUpOOztBQU1JO0VBQ0UsbUJBQUE7RUFDQSx1QkFBQTtFQUNBLGlCQUFBO0VBQ0EsaUJBQUE7QUFKTjs7QUFNSTtFQUNFLG9CQUFBO0FBSk47O0FBTUk7RUFDRSx5QkFBQTtFQUNBLGlCQUFBO0FBSk47O0FBS007RUFDRSxhQUFBO0VBQ0EsOEJBQUE7RUFDQSxrQkFBQTtBQUhSOztBQVFFO0VBQ0UsZ0JBQUE7QUFMSjs7QUFNSTtFQUNFLGFBQUE7RUFDQSw4QkFBQTtBQUpOOztBQUtNO0VBQ0UsY0FBQTtFQUNBLGtCQUFBO0FBSFI7O0FBS007RUFDRSxjQUFBO0VBQ0Esa0JBQUE7QUFIUjs7QUFLTTtFQUNFLFdBQUE7RUFDQSxrQkFBQTtFQUNBLGtCQUFBO0FBSFI7O0FBUUU7RUFDRSx5QkFBQTtBQUxKIiwiZmlsZSI6InNyYy9hcHAvbWVudS9leHBsb3JlL3Nob3BwaW5nLWNhcnQvc2hvcHBpbmctY2FydC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuaGVhZGVyIHtcclxuICAgICZfX2ljb257XHJcbiAgICAgIGZvbnQtc2l6ZTogMjRweDtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgLmNhcnQge1xyXG4gICAgJl9fYXZhdGFyIHtcclxuICAgICAgbWFyZ2luLXJpZ2h0OiA4cHg7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIC5ib2R5IHtcclxuICAgICZfX2NvbnRhaW5lciB7XHJcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICNGRkY5RTkgIWltcG9ydGFudDtcclxuICAgICAgcGFkZGluZy10b3A6IDMycHg7XHJcbiAgICB9XHJcbiAgICAmX19jYXJkIHtcclxuICAgICAgYm9yZGVyLXJhZGl1czogMjRweDtcclxuICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcbiAgICAgIHBhZGRpbmc6IDMycHggMHB4O1xyXG4gICAgICBtYXJnaW4tdG9wOiAtNDhweFxyXG4gICAgfVxyXG4gICAgJl9fZm9ybSB7XHJcbiAgICAgIHBhZGRpbmc6IDBweCA4cHggOHB4O1xyXG4gICAgfVxyXG4gICAgJl9fdG90YWwge1xyXG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRkZGOUU5O1xyXG4gICAgICBwYWRkaW5nOiAxNnB4IDhweDtcclxuICAgICAgJi1idXkge1xyXG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG4gICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICAuYnRuIHtcclxuICAgIG1hcmdpbi10b3A6IDE2cHg7XHJcbiAgICAmX19xdHkge1xyXG4gICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgICAgICYtYWRkIHtcclxuICAgICAgICBjb2xvcjogIzdCQTU3RjtcclxuICAgICAgICBhbGlnbi1zZWxmOiBjZW50ZXI7XHJcbiAgICAgIH1cclxuICAgICAgJi1yZW1vdmUge1xyXG4gICAgICAgIGNvbG9yOiAjRjA2RjUzO1xyXG4gICAgICAgIGFsaWduLXNlbGY6IGNlbnRlcjtcclxuICAgICAgfVxyXG4gICAgICAmLXZhbHVlIHtcclxuICAgICAgICB3aWR0aDogNDBweDtcclxuICAgICAgICBhbGlnbi1zZWxmOiBjZW50ZXI7XHJcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIGlvbi1jYXJkIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNGRkY5RTk7XHJcbiAgfSJdfQ== */\";","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\nimport { WisataDetail } from '../../../model/wisata-detail.interface';\r\nimport { UserData } from '../../../model/user.model';\r\nimport { WisataService } from '../../../service/wisata.service';\r\nimport { AuthService, User } from '../../../service/auth.service';\r\nimport { HistoryService } from 'src/app/service/history.service';\r\nimport { map } from 'rxjs/operators';\r\nimport { AngularFireStorage } from \"@angular/fire/storage\";\r\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { ToastController } from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'app-shopping-cart',\r\n  templateUrl: './shopping-cart.page.html',\r\n  styleUrls: ['./shopping-cart.page.scss'],\r\n})\r\nexport class ShoppingCartPage implements OnInit {\r\n  public wisataList: Observable<WisataDetail>\r\n  public imageDetail: Observable<string>;\r\n  public shopCart = new Observable<History>();\r\n  public shopForm: FormGroup;\r\n  cartItems: any[] = [];\r\n  total: number;\r\n  qty: number;\r\n  max: number;\r\n  harga: number;\r\n  wisata: string;\r\n  wisataId: string;\r\n  oldTiketTerjual: number;\r\n  oldTiketTersedia: number;\r\n  oldBalance: number;\r\n  userProfile: any;\r\n  paid: Boolean = false;\r\n  public nama: any = [];\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private wisataService: WisataService,\r\n    private storage: AngularFireStorage,\r\n    formBuilder: FormBuilder,\r\n    private authService: AuthService,\r\n    private historyService: HistoryService,\r\n    private firestore: AngularFirestore,\r\n    private toastController: ToastController,\r\n  ) {\r\n    this.shopForm = formBuilder.group({\r\n      nik: ['', Validators.required],\r\n      tlp: ['', Validators.required],\r\n      qty: ['', Validators.required]\r\n    });\r\n   }\r\n\r\n  ngOnInit() {\r\n    this.wisataId = this.route.snapshot.paramMap.get('id');\r\n    this.wisataList = this.wisataService.getWisataDetail(this.wisataId).pipe(\r\n      map(wisataList => {\r\n        this.imageDetail = new Observable<string>();\r\n        wisataList.gambarUrl = new Observable<string[]>();\r\n        wisataList.gambar.forEach((gambar, index) => {\r\n          this.imageDetail[index] = this.getImageUrl(gambar);\r\n        });\r\n        this.max = wisataList.tiketTersedia;\r\n        this.harga = wisataList.harga;\r\n        this.total = this.harga;\r\n        this.qty = 1;\r\n        this.wisata = wisataList.nama;\r\n        this.oldTiketTerjual = wisataList.tiketTerjual;\r\n        this.oldTiketTersedia = wisataList.tiketTersedia;\r\n        return wisataList;\r\n      })\r\n    );\r\n  }\r\n\r\n  getImageUrl(imageName) {\r\n    return this.storage.ref(`wisata/${imageName}`).getDownloadURL();\r\n  }\r\n\r\n  incrementQty() {\r\n    this.qty++;\r\n    this.total = this.qty * this.harga;\r\n    if(this.qty > this.max) {\r\n      this.qty = this.max;\r\n    }\r\n  }\r\n\r\n  decrementQty() {\r\n    this.qty--;\r\n    this.total = this.qty * this.harga;\r\n    if(this.qty < 1) {\r\n      this.qty = 1;\r\n      this.total = this.harga;\r\n    }\r\n  }\r\n\r\n  shopping() {\r\n    const qty = this.shopForm.value.qty;\r\n    const nik = this.shopForm.value.nik;\r\n    const tlp = this.shopForm.value.tlp;\r\n    const date = new Date();\r\n\r\n    this.authService.getUserData().subscribe(ref => {\r\n      this.userProfile = ref;\r\n      this.oldBalance = this.userProfile.balance;\r\n      const email = this.userProfile.email;\r\n\r\n      if(this.paid === false){\r\n        if(this.oldBalance < this.total || this.oldTiketTersedia < this.qty) {\r\n          this.presentToast();\r\n        } else if(!this.paid){\r\n            this.firestore.collection('wisata').doc<WisataDetail>(this.wisataId).update({\r\n              tiketTerjual: (this.oldTiketTerjual + qty),\r\n              tiketTersedia: (this.oldTiketTersedia - qty)\r\n            });\r\n\r\n            this.firestore.collection('users').doc<UserData>(this.userProfile.uid).update({\r\n              balance: (this.oldBalance - this.total)\r\n            });\r\n\r\n            this.historyService.addHistory(qty, this.userProfile.name, date, this.wisata, this.total, email, tlp, false, nik)\r\n            this.paid = true;\r\n        }\r\n    }\r\n    });\r\n  }\r\n\r\n  async presentToast() {\r\n    const toast = await this.toastController.create({\r\n      message: 'Saldo anda tidak cukup.',\r\n      duration: 2000,\r\n      color: 'danger',\r\n      position: 'top',\r\n      mode: 'ios'\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n}\r\n"],"sourceRoot":"webpack:///"}