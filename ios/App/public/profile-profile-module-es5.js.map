{"version":3,"sources":["webpack:///src/app/menu/profile/profile.page.html","webpack:///src/app/menu/profile/profile-routing.module.ts","webpack:///src/app/menu/profile/profile.module.ts","webpack:///src/app/menu/profile/profile.page.scss","webpack:///src/app/menu/profile/profile.page.ts"],"names":["redirectUnauthorizedToLogin","routes","path","component","loadChildren","then","m","EditProfilePageModule","ProfilePageRoutingModule","imports","forChild","exports","ProfilePageModule","declarations","ProfilePage","authService","loadingController","alertController","firestore","create","loading","present","getUserData","subscribe","ref","getUserPhotoUrl","photo","res","dismiss","userProfile","collection","where","email","valueChanges","historyCount","length","cssClass","message","buttons","text","handler","totalAmount","balance","topupBalance","alert","selector","template"],"mappings":"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","file":"profile-profile-module-es5.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-buttons routerLink=\\\"/history\\\" slot=\\\"end\\\">\\r\\n      <ion-badge class=\\\"notifications-badge\\\" color=\\\"danger\\\" mode=\\\"ios\\\" *ngIf=\\\"historyCount > 0\\\">{{ historyCount }}</ion-badge>\\r\\n      <ion-icon class=\\\"header__icon\\\" name=\\\"bag-check\\\"></ion-icon>\\r\\n    </ion-buttons>\\r\\n    <ion-title class=\\\"ion-text-center\\\">\\r\\n      Wisea\\r\\n    </ion-title>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-menu-button menu=\\\"main-menu\\\"></ion-menu-button>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content [fullscreen]=\\\"true\\\" color=\\\"background\\\">\\r\\n  <ion-item-group id=\\\"container\\\">\\r\\n    <ion-item lines='none'>\\r\\n      <ion-avatar class=\\\"proflePic\\\">\\r\\n        <ion-img src=\\\"{{ userProfile?.photo }}\\\"></ion-img>\\r\\n      </ion-avatar>\\r\\n    </ion-item>\\r\\n    <ion-title size=\\\"large\\\" class=\\\"ion-text-center userName\\\">{{ userProfile?.username }}</ion-title>\\r\\n    <ion-label style=\\\"padding-top: 30px\\\">{{ userProfile?.name }}</ion-label>\\r\\n    <ion-label class=\\\"ion-padding-top\\\">{{ userProfile?.email }}</ion-label>\\r\\n    <ion-label class=\\\"ion-padding-top\\\">\\r\\n      <ion-icon name=\\\"phone-portrait-sharp\\\"></ion-icon>{{ userProfile?.phone }}\\r\\n    </ion-label>\\r\\n    <ion-item lines='none'>\\r\\n      <ion-card>\\r\\n        <ion-grid>\\r\\n          <ion-row class=\\\"ion-align-items-center ion-text-center\\\">\\r\\n            <ion-col size=\\\"8\\\">\\r\\n              <p>Saldo kamu</p>\\r\\n              <p>{{ userProfile?.balance | currency:'IDR':'symbol-narrow':'1.0' }}</p>\\r\\n            </ion-col>\\r\\n            <div class=\\\"verticalLine\\\"></div>\\r\\n            <ion-col size=\\\"4\\\">\\r\\n              <ion-button (click)=\\\"topupAlert()\\\">Topup</ion-button>\\r\\n            </ion-col>\\r\\n          </ion-row>\\r\\n        </ion-grid>\\r\\n      </ion-card>\\r\\n    </ion-item>\\r\\n    <ion-button expand=\\\"block\\\" shape=\\\"round\\\" color=\\\"primary\\\" style=\\\"margin-bottom: 80px\\\" routerLink=\\\"/menu/tabs/profile/edit-profile\\\">Edit Profile</ion-button>\\r\\n  </ion-item-group>\\r\\n</ion-content>\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { ProfilePage } from './profile.page';\r\nimport {canActivate, redirectUnauthorizedTo} from '@angular/fire/auth-guard';\r\n\r\nconst redirectUnauthorizedToLogin = () => redirectUnauthorizedTo(['/']);\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ProfilePage,\r\n    ...canActivate(redirectUnauthorizedToLogin),\r\n  },\r\n  {\r\n    path: 'edit-profile',\r\n    loadChildren: () => import('./edit-profile/edit-profile.module').then( m => m.EditProfilePageModule)\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class ProfilePageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ProfilePageRoutingModule } from './profile-routing.module';\r\n\r\nimport { ProfilePage } from './profile.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    ProfilePageRoutingModule\r\n  ],\r\n  declarations: [ProfilePage]\r\n})\r\nexport class ProfilePageModule {}\r\n","export default \"#container {\\n  position: absolute;\\n  left: 5%;\\n  right: 5%;\\n  top: 5%;\\n  color: var(--ion-color-secondary-contrast);\\n}\\n\\n#container ion-item {\\n  margin-top: 30px;\\n}\\n\\n#container ion-label {\\n  font-size: 16px;\\n  text-align: center;\\n}\\n\\n#container ion-img {\\n  display: block;\\n  margin-left: auto;\\n  margin-right: auto;\\n}\\n\\n#container ion-card {\\n  margin: 30px 0 !important;\\n  border: 2px solid black;\\n  border-radius: 20px;\\n  width: 100%;\\n  color: var(--ion-color-secondary-contrast);\\n}\\n\\n.verticalLine {\\n  width: 2px;\\n  top: 0%;\\n  bottom: 0%;\\n  left: 65%;\\n  background: black;\\n  margin: 0 auto;\\n  position: absolute;\\n  border-radius: 2px;\\n}\\n\\n.userName {\\n  margin-top: 30px;\\n  font-size: 28px;\\n  font-weight: 600;\\n}\\n\\n.proflePic {\\n  height: 200px;\\n  width: 200px;\\n  margin: 30px auto 0px auto;\\n}\\n\\n.notifications-badge {\\n  position: absolute;\\n  top: -3px;\\n  right: -4px;\\n  font-size: 10px;\\n}\\n\\n.header__icon {\\n  font-size: 24px;\\n  z-index: -1;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbWVudS9wcm9maWxlL3Byb2ZpbGUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0Usa0JBQUE7RUFDQSxRQUFBO0VBQ0EsU0FBQTtFQUNBLE9BQUE7RUFDQSwwQ0FBQTtBQUNGOztBQUVBO0VBQ0UsZ0JBQUE7QUFDRjs7QUFFQTtFQUNFLGVBQUE7RUFDQSxrQkFBQTtBQUNGOztBQUVBO0VBQ0UsY0FBQTtFQUNBLGlCQUFBO0VBQ0Esa0JBQUE7QUFDRjs7QUFFQTtFQUNFLHlCQUFBO0VBQ0EsdUJBQUE7RUFDQSxtQkFBQTtFQUNBLFdBQUE7RUFDQSwwQ0FBQTtBQUNGOztBQUVBO0VBQ0UsVUFBQTtFQUNBLE9BQUE7RUFDQSxVQUFBO0VBQ0EsU0FBQTtFQUNBLGlCQUFBO0VBQ0EsY0FBQTtFQUNBLGtCQUFBO0VBQ0Esa0JBQUE7QUFDRjs7QUFFQTtFQUNFLGdCQUFBO0VBQ0EsZUFBQTtFQUNBLGdCQUFBO0FBQ0Y7O0FBRUE7RUFDRSxhQUFBO0VBQ0EsWUFBQTtFQUNBLDBCQUFBO0FBQ0Y7O0FBR0U7RUFDRSxrQkFBQTtFQUNBLFNBQUE7RUFDQSxXQUFBO0VBQ0EsZUFBQTtBQUFKOztBQUtFO0VBQ0UsZUFBQTtFQUNBLFdBQUE7QUFGSiIsImZpbGUiOiJzcmMvYXBwL21lbnUvcHJvZmlsZS9wcm9maWxlLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIiNjb250YWluZXIge1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICBsZWZ0OiA1JTtcclxuICByaWdodDogNSU7XHJcbiAgdG9wOiA1JTtcclxuICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLXNlY29uZGFyeS1jb250cmFzdCk7XHJcbn1cclxuXHJcbiNjb250YWluZXIgaW9uLWl0ZW0ge1xyXG4gIG1hcmdpbi10b3A6IDMwcHg7XHJcbn1cclxuXHJcbiNjb250YWluZXIgaW9uLWxhYmVsIHtcclxuICBmb250LXNpemU6IDE2cHg7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG59XHJcblxyXG4jY29udGFpbmVyIGlvbi1pbWcge1xyXG4gIGRpc3BsYXk6IGJsb2NrO1xyXG4gIG1hcmdpbi1sZWZ0OiBhdXRvO1xyXG4gIG1hcmdpbi1yaWdodDogYXV0bztcclxufVxyXG5cclxuI2NvbnRhaW5lciBpb24tY2FyZCB7XHJcbiAgbWFyZ2luOiAzMHB4IDAgIWltcG9ydGFudDtcclxuICBib3JkZXI6IDJweCBzb2xpZCBibGFjaztcclxuICBib3JkZXItcmFkaXVzOiAyMHB4O1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGNvbG9yOiB2YXIoLS1pb24tY29sb3Itc2Vjb25kYXJ5LWNvbnRyYXN0KTtcclxufVxyXG5cclxuLnZlcnRpY2FsTGluZSB7XHJcbiAgd2lkdGg6IDJweDtcclxuICB0b3A6IDAlO1xyXG4gIGJvdHRvbTogMCU7XHJcbiAgbGVmdDogNjUlO1xyXG4gIGJhY2tncm91bmQ6IGJsYWNrO1xyXG4gIG1hcmdpbjogMCBhdXRvO1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICBib3JkZXItcmFkaXVzOiAycHg7XHJcbn1cclxuXHJcbi51c2VyTmFtZXtcclxuICBtYXJnaW4tdG9wOiAzMHB4O1xyXG4gIGZvbnQtc2l6ZTogMjhweDtcclxuICBmb250LXdlaWdodDogNjAwO1xyXG59XHJcblxyXG4ucHJvZmxlUGljIHtcclxuICBoZWlnaHQ6IDIwMHB4O1xyXG4gIHdpZHRoOiAyMDBweDtcclxuICBtYXJnaW46IDMwcHggYXV0byAwcHggYXV0bztcclxufVxyXG5cclxuLm5vdGlmaWNhdGlvbnMge1xyXG4gICYtYmFkZ2Uge1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgdG9wOiAtM3B4O1xyXG4gICAgcmlnaHQ6IC00cHg7XHJcbiAgICBmb250LXNpemU6IDEwcHg7XHJcbiAgfVxyXG59XHJcblxyXG4uaGVhZGVyIHtcclxuICAmX19pY29uIHtcclxuICAgIGZvbnQtc2l6ZTogMjRweDtcclxuICAgIHotaW5kZXg6IC0xO1xyXG4gIH1cclxufVxyXG4iXX0= */\";","import { Component, OnInit } from '@angular/core';\r\nimport {AuthService} from '../../service/auth.service';\r\nimport {AlertController, LoadingController} from '@ionic/angular';\r\nimport {AngularFirestore} from \"@angular/fire/firestore\";\r\nimport {Wisata} from \"../../model/wisata.interface\";\r\n\r\n@Component({\r\n  selector: 'app-profile',\r\n  templateUrl: './profile.page.html',\r\n  styleUrls: ['./profile.page.scss'],\r\n})\r\nexport class ProfilePage implements OnInit {\r\n  userProfile: any;\r\n  private currentPhoto: string;\r\n  historyCount: number;\r\n\r\n  constructor(\r\n      private authService: AuthService,\r\n      private loadingController: LoadingController,\r\n      private alertController: AlertController,\r\n      private firestore: AngularFirestore,\r\n      ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  async ionViewWillEnter() {\r\n    const loading = await this.loadingController.create();\r\n    await loading.present();\r\n\r\n    this.authService.getUserData().subscribe(ref => {\r\n      this.authService.getUserPhotoUrl(ref.photo).subscribe(res => {\r\n        loading.dismiss();\r\n\r\n        this.userProfile = ref;\r\n        this.userProfile.photo = res;\r\n\r\n        this.firestore.collection<Wisata>('history', ref => {\r\n          return ref.where('email', '==', this.userProfile.email).where('open', '==', false);\r\n        }).valueChanges().subscribe(res => {\r\n          this.historyCount = res.length;\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n\r\n  async topupAlert() {\r\n    const alert = await this.alertController.create({\r\n      cssClass: 'my-custom-class',\r\n      message: 'Silahkan memilih jumlah topup yang diinginkan.',\r\n      buttons: [\r\n        {\r\n          text: '10.000',\r\n          handler: () => {\r\n            const totalAmount = this.userProfile.balance + 10000;\r\n            this.authService.topupBalance(totalAmount);\r\n          }\r\n        }, {\r\n          text: '50.000',\r\n          handler: () => {\r\n            const totalAmount = this.userProfile.balance + 50000;\r\n            this.authService.topupBalance(totalAmount);\r\n          }\r\n        }, {\r\n          text: '100.000',\r\n          handler: () => {\r\n            const totalAmount = this.userProfile.balance + 100000;\r\n            this.authService.topupBalance(totalAmount);\r\n          }\r\n        }\r\n      ]\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n}\r\n"]}